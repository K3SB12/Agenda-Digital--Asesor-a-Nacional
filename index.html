<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IDOMEP PRO Â· Transitorio IX</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100 min-h-screen p-6">

<!-- HEADER -->
<div class="bg-indigo-700 text-white p-6 rounded-xl shadow-lg mb-6">
<h1 class="text-3xl font-bold">ğŸ“ IDOMEP PRO</h1>
<p class="text-sm mt-2">
Transitorio IX Â· Estratos TÃ­tulo II Â· CalificaciÃ³n mÃ­nima 70
</p>

<div class="mt-3 text-xs bg-white/20 p-3 rounded-lg">
Fundamento: Art.2 RPCID Â· Art.5 inc l) LMEP 10159 Â· Ley 9871 Â· DG-RES-88-2023
</div>

<div class="mt-3 flex gap-3 text-sm">
<a href="https://dgth.mep.go.cr/pruebas-de-idoneidad-transitorio-ix/"
target="_blank"
class="bg-white text-indigo-700 px-3 py-1 rounded font-semibold">
Tablas DGTH
</a>

<a href="https://notebooklm.google.com/notebook/1d7bd2c4-bc5c-43bb-b65d-62275a44c58f"
target="_blank"
class="bg-yellow-400 text-black px-3 py-1 rounded font-semibold">
NotebookLM Lecturas
</a>
</div>
</div>

<!-- SELECTOR ESTRATO -->
<div class="bg-white p-4 rounded-xl shadow mb-6">
<h2 class="font-bold mb-3">Seleccione su Estrato</h2>
<select id="estratoSelect" class="border p-2 rounded w-full">
<option value="tecnico">TÃ©cnico Docente</option>
<option value="docente">Propiamente Docente</option>
<option value="administrativo">Administrativo Docente</option>
</select>
</div>

<!-- PROGRESO -->
<div class="bg-white p-4 rounded-xl shadow mb-6">
<h2 class="font-bold mb-3">Mi Progreso</h2>
<div class="bg-slate-200 rounded-full h-3">
<div id="barraProgreso" class="bg-green-500 h-3 rounded-full" style="width:0%"></div>
</div>
<p class="text-sm mt-2">
Dominio general: <span id="nivelGeneral">0%</span>
</p>
</div>

<!-- MODULOS -->
<div class="bg-white p-4 rounded-xl shadow mb-6">
<h2 class="font-bold mb-4">Ruta por Competencias</h2>
<div id="modulosContainer" class="space-y-2"></div>
</div>

<!-- AREA PREGUNTA -->
<div class="bg-white p-6 rounded-xl shadow mb-6">
<h2 class="font-bold mb-4">Simulador Oficial</h2>
<div id="preguntaArea"></div>
</div>

<!-- BOTON JUEGO -->
<div class="text-center">
<button onclick="activarJuego()"
class="bg-indigo-600 text-white px-6 py-3 rounded-xl text-lg font-bold">
ğŸ® Jugar IdoMep
</button>
</div>

<!-- ================= SCRIPT ================= -->

<script>

// ================= ESTRUCTURA COMPETENCIAS =================

const perfiles = {
tecnico: [
'1.1','1.2','1.3','1.4',
'2.1','2.2','2.3','2.4'
],
docente: [
'1.1','1.2','1.3',
'2.1','2.2','2.3'
],
administrativo: [
'1.1','1.2','1.3','1.4','1.5',
'2.1','2.2','2.3','2.4','2.5'
]
};

// ================= BANCO DEMO (caso contextualizado) =================

const banco = {
'1.2': [
{
texto: 'Un asesor debe aplicar normativa vinculante en un proceso institucional. Â¿QuÃ© debe hacer?',
opciones:[
{t:'Aplicar LMEP 10159 y RPCID segÃºn el caso',c:true},
{t:'Actuar por costumbre',c:false},
{t:'Consultar solo al director',c:false},
{t:'Esperar instrucciones informales',c:false}
],
fundamento:'Art.5 LMEP 10159 Â· Art.2 RPCID'
}
]
};

// ================= ESTADO =================

let estado = JSON.parse(localStorage.getItem('idomepEstado')) || {
estrato:'tecnico',
competenciaActiva:null,
progreso:{}
};

document.getElementById('estratoSelect').value = estado.estrato;

// ================= RENDER MODULOS =================

function renderModulos(){
const cont = document.getElementById('modulosContainer');
cont.innerHTML='';

const lista = perfiles[estado.estrato];

lista.forEach((comp,i)=>{
const bloqueado = i>0 && !estado.progreso[lista[i-1]];
cont.innerHTML+=`
<div class="p-3 rounded ${bloqueado?'bg-gray-200':'bg-green-100'} cursor-pointer"
onclick="${bloqueado?'':'activarCompetencia(\''+comp+'\')'}">
Competencia ${comp} ${bloqueado?'ğŸ”’':'âœ…'}
</div>
`;
});
}

renderModulos();

// ================= ACTIVAR COMPETENCIA =================

function activarCompetencia(c){
estado.competenciaActiva=c;
cargarPregunta();
}

// ================= CARGAR PREGUNTA =================

function cargarPregunta(){

const comp=estado.competenciaActiva;
const area=document.getElementById('preguntaArea');

if(!banco[comp]){
area.innerHTML='<p>No hay preguntas cargadas aÃºn para esta competencia.</p>';
return;
}

const pregunta=banco[comp][0];

let html=`<p class="font-bold mb-3">${pregunta.texto}</p>`;

pregunta.opciones.forEach((op,i)=>{
html+=`
<div class="mb-2 cursor-pointer p-2 border rounded"
onclick="responder(${i})">
${op.t}
</div>`;
});

area.innerHTML=html;
window.preguntaActual=pregunta;
}

// ================= RESPONDER =================

function responder(i){
const correcta=window.preguntaActual.opciones[i].c;

if(correcta){
alert("âœ… Correcto\n"+window.preguntaActual.fundamento);
estado.progreso[estado.competenciaActiva]=true;
actualizarProgreso();
renderModulos();
}else{
alert("âŒ Incorrecto\nRevisar fundamento legal.");
}
localStorage.setItem('idomepEstado',JSON.stringify(estado));
}

// ================= PROGRESO =================

function actualizarProgreso(){
const total=perfiles[estado.estrato].length;
const completadas=Object.keys(estado.progreso).length;
const porcentaje=Math.round((completadas/total)*100);
document.getElementById('barraProgreso').style.width=porcentaje+'%';
document.getElementById('nivelGeneral').innerText=porcentaje+'%';
}

actualizarProgreso();

// ================= MODO JUEGO =================

function activarJuego(){
alert("Modo juego activado ğŸ®\nResponda correctamente para avanzar en la ruta.");
}

</script>

</body>
</html>
